- Need to change the async implementation to allow setHandler to be
  called multiple times, but only from the main thread.
